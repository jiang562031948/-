<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/details.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <!-- header -->
    <div id="header">
        <img src="img/img1/logo.jpg" alt="" class="img1">
        <img src="img/img1/cha.png" alt="" class="img2">
    </div>
    <!-- banner -->
    <div id="banner">
        <div class="banner2">
            <ul class="banner-ul1">
                <li><a href="list.html">所有产品</a></li>
                <li><a href="">奢雅极</a></li>
                <li><a href="">新闻</a></li>
                <li><a href="">品牌故事</a></li>
            </ul>
            <img src="img/img1/tb3.png" alt="" class="img3">
            <ul class="banner-ul2">
                <li><a href="">查找门店</a></li>
                <li><a href="">联系我们</a></li>
                <li><a href="reg.html">登录/注册</a></li>
            </ul>
            <img src="img/img1/ss2.png" alt="" class="img6">
            <img src="img/img1/suo(4).png" alt="" class="img7">
            <span class="span1">0</span>
        </div>

        <div class="banner3" style="display: none;">
            <ul class="banner-ul1">
                <li><a href="list.html">所有产品</a></li>
                <li><a href="">奢雅极</a></li>
                <li><a href="">新闻</a></li>
                <li><a href="">品牌故事</a></li>
            </ul>
            <img src="img/img1/xin.png" alt="" class="img8">
            <ul class="banner-ul2">
                <li><img src="img/img1/erji.png" alt=""></li>
                <li><img src="img/img1/ditu.png" alt=""></li>
                <li><img src="img/img1/txl.png" alt=""></li>
                <li><img src="img/img1/ss3.png" alt="" class="img9"></li>
                <li>
                    <img src="img/img1/suo(4).png" alt="" class="img7">
                    <span class="span2">0</span>
                </li>
            </ul>
        </div>
    </div>
    <div id="content">
        <div id="middle">
            <img src="img/img2/fdj1.png" alt="">
            <div id="mask" style="display: none;"></div>
        </div>
        <div id="small">
            <img src="img/img2/fdj1.png" alt="">
            <img src="img/img2/fdj2.png" alt="">
        </div>
        <div id="big" style="display: none;"><img src="img/img2/fdj1.png" alt=""></div>
        <div id="con">
            <a href="">
                <p class="p1 cont1">抚纹抗皱精华眼膜</p>
                <div class="div1">
                    <a href=""><img src="img/img2/wjx.png" alt="" class="img1"></a>
                    <a href=""><img src="img/img2/wjx.png" alt="" class="img2"></a>
                    <a href=""><img src="img/img2/wjx.png" alt="" class="img3"></a>
                    <a href=""><img src="img/img2/wjx.png" alt="" class="img4"></a>
                    <a href=""><img src="img/img2/wjx.png" alt="" class="img5"></a>
                </div>
                <span class="span1">没有商品评论</span>
                <p class="p2 cont2">Eye Max 眼膜，直击四大眼周部位（眉心、眼睑、眼窝、眼角），全网提塑，精雕明眸。</p>
                <span class="span2"><a href="">查看更多</a></span>
                <p class="p3 pian">6</p>
                <p class="p4">
                    <span class="a1" id="reduce">-</span>
                    <span class="a2 numb">1</span>
                    <span class="a3" id="add">+</span>
                </p>
                <span class="span6">￥</span>
                <span class="span3 price">1,200</span>
                <p class="p5">
                    <span class="span4"><a href="shopping.html" class="a4" id="join">加入购物车</a></span>
                    <span class="span5"><a href="shopping.html" class="a5">立即购买</a></span>
                </p>
                <p class="p6">
                    <a href="" class="a6">
                        <img src="img/img2/xyd.png" alt="">
                        添加到心愿单
                    </a>
                    <a href="" class="a7">
                        <img src="img/img2/fx.png" alt="">
                        分享
                    </a>
                </p>
            </a>
            
        </div>
        <div id="conv">
            <ul class="ul1">
                <li>突破性Eye Max 设计，重新定义眼周提拉区，1片额-眉-眼多区覆盖，直击眼周4 大部位(眉心、眼睑、眼窝、眼角）。高密度棉柔膜布，蕴含15mL修护精华，提眼廓，亮眼周，淡眼纹。搭配4D精华眼霜，加乘奢养眼周，立体精雕，大开眼界。</li>
            </ul>
            <ul class="ul2">
                <li>主要功效</li>
                <li>•眼周提拉区，一片全区覆盖，精雕四大关键（眉心-眼睑-眼窝-眼角），点对点微压深导；</li>
                <li>•提升眼廓，提亮暗沉，密集修护，</li>
                <li>•尝鲜1片：缓解眼部暗沉，水润柔焦，次日妆容服帖；</li>
                <li>•连续6片：淡化假性干纹细纹，提亮黯哑；</li>
                <li>•周期12片：改善皱纹等深层纹理，防御新纹路的生成；</li>
            </ul>
            <ul class="ul3">
                <li>使用方法</li>
                <li>•建议紧致抚纹精华眼霜一起使用，先轻柔涂抹眼霜，用铂金按摩棒塑型眼部肌肤，然后再敷上眼膜，获得卓效修护效果；</li>
                <li>•可根据肌肤状态、室内温度等因素，适当调节眼膜停留时间，长敷至少10-15分钟；</li>
            </ul>
        </div>
        <div id="dt">
            <img src="img/img2/dt.jpg" alt="">
            <img src="img/img2/dbt.jpg" alt="">
        </div>
        <div class="pl">
            <h2>商品评论</h2>
        </div>
        <div class="db">
            <h3>抚纹抗皱精华眼膜</h3>




            <div class="db1">
                <ul class="star">
                    <li index="0"></li>
                    <li index="1"></li>
                    <li index="2"></li>
                    <li index="3"></li>
                    <li index="4"></li>
                </ul>
                <span class="words"></span>
            </div>




            <span class="span4">添加您的评论</span>
            
        </div>
        <div class="db2">没有商品评价</div>
    </div>
    <div id="footer">
        <div class="sm">
            <div class="sm-l">
                <p class="watch">关注我们</p>
                <img src="img/img1/wb.png" alt="" class="img1">
                <p class="p2"><img src="img/img1/wx2.png" alt="" class="img2"></p>
                <div class="p3">
                    <p class="p4">关注并绑定CPB肌肤之钥官方微信账号
                    </p>
                    <p class="p5">
                        <span></span>
                        <p class="p6">了解最新产品和品牌动态</p> 
                        <span></span>
                        <p class="p7">查询会员积分</p> 
                    </p>
                    <img src="img/img1/logo_wechat.jpg" alt="" class="img3">
                </div>
            </div>
            <div class="sm-r">
                <ul class="ul1">
                    <li>关于我们</li>
                    <li><a href="">门店搜索</a></li>
                    <li><a href="">公司信息</a></li>
                    <li><a href="">使用条款</a></li>
                    <li><a href="">隐私保护</a></li>
                </ul>
                <ul class="ul2">
                    <li>网站服务</li>
                    <li><a href="">会员中心</a></li>
                    <li><a href="">在线客服</a></li>
                    <li><a href="">联系电话</a></li>
                </ul>
                <ul class="ul3">
                    <li>参考帮助</li>
                    <li><a href="">退货问题</a></li>
                    <li><a href="">常见问题</a></li>
                </ul>
            </div>
        </div>
        <div class="xm">
            <p>©2020资生堂（中国）投资有限公司保留所有权利</p>
            <div class="xm-r">
                <span class="span1"><a href="">企业营业执照</a></span>
                <span class="span2">
                    <img src="img/img1/xm1.png" alt="">
                    <a href="">上海工商 沪ICP备10203872号-3</a>
                </span>
                <span class="span3">
                    <img src="img/img1/xm2.png" alt="">
                    <a href="">沪公网安备 31011502007430号</a>
                </span>
            </div>
            
        </div>

    </div>

    <script src="jquery.min.js"></script>
    <script src="url.js"></script>
    <script>
        $(".img2").click(function(){
            $("#header").remove()
            $(".banner2").fadeIn()
        })
        window.onscroll = function(){
		    let banner3 = document.querySelectorAll(".banner3")[0]
            let _top = document.documentElement.scrollTop || document.body.scrollTop;
            let banner1 = document.querySelectorAll(".banner1")[0]
		    if(_top > 60){
                banner3.style.display="block"
                banner3.style.position = "fixed";
			    banner3.style.top = 0;
                }
            else {
                banner3.style.top = "60px";
                banner3.style.display="none"

		    }
        }
        // 放大镜
        let smallimglist=document.querySelectorAll("#small img")
        let middleimg=document.querySelectorAll("#middle img")[0]
        let bigimg=document.querySelectorAll("#big img")[0]
        // console.log(middleimg)
        for(let i=0;i<smallimglist.length;i++){
            smallimglist[i].onclick=function(){
                // console.log(this.src)
            // 1.2让中图和大图的地址等于当前点击点击的小图的地址
               middleimg.src=this.src
               bigimg.src=this.src
            }
        }
        let middle=document.getElementById("middle")
        let mask=document.getElementById("mask")
        let big = document.getElementById("big")
        // let big=document.getElementById("big img")
       // 2.1鼠标经过
        middle.onmouseenter=function(e){
           let point={
               x:e.clientX,
               y:e.clientY
           }
        //    console.log(point)
           mask.style.display="block"
           mask.style.left=point.x+"px"
           mask.style.top=point.y+"px"
           big.style.display="block"
        }
       // 2.2鼠标移动
    //  console.log($("#middle").position());
        middle.onmousemove=function(e){
            let point={
               x:e.clientX-140,
               y:e.pageY-250
            }
        // ?鼠标位于遮罩层中心????
           mask.style.left=point.x-mask.offsetWidth/2+"px"
           mask.style.top=point.y-mask.offsetWidth/2+"px"
        // 大图的移动是遮罩层移动的倍数的负值
           bigimg.style.left=(-(point.x-mask.offsetWidth/2)*5)+"px"
           bigimg.style.top=(-(point.y-mask.offsetWidth/2)*5)+"px"
          // 注意判断的位置,只要移动就会动最后判断
           if(parseInt(mask.style.left)>=middle.offsetWidth-mask.offsetWidth){
               mask.style.left=middle.offsetWidth-mask.offsetWidth+"px" 
           }
           if(parseInt(mask.style.left)<=0){
               mask.style.left=0+"px"
           }
           if(parseInt(mask.style.top)<=10){
               mask.style.top=10+"px"
           }
           if(parseInt(mask.style.top)>=middle.offsetWidth-mask.offsetWidth+10){
               mask.style.top=middle.offsetWidth-mask.offsetWidth+10+"px"
           }
           if(parseInt(bigimg.style.left)>=0){
               bigimg.style.left="0"
           }
           if(parseInt(bigimg.style.top)>=0){
               bigimg.style.top="0"
           }
           if(parseInt(bigimg.style.left)<=-1800){
               bigimg.style.left=-1800+"px"
           }
           if(parseInt(bigimg.style.top)<=-2000){
               bigimg.style.top=-2000+"px"
           }
       }
       // 2.2鼠标离开
       middle.onmouseleave=function(){
           mask.style.display="none"
           big.style.display="none"
       }

        // 底部
        let img2 = document.querySelectorAll("#footer .p2")[0]
        let p3 = document.querySelectorAll("#footer .p3")[0]
        // console.log(img2)
        img2.onmouseenter=function(){
            p3.style.display="block"
        }
        img2.onmouseleave=function(){
            p3.style.display="none"
        }


        let str=location.href
        let arr=str.split("=")
        let num=arr[1]
        // console.log(num)
        $.ajax({
            url:`${address}/getnews`,
            data:{
                id:num
            },
            success(data){
                if(data.length===0){
                // alert("无商品")
                    return
                }
                else{
                    console.log(data)
                    data.forEach(item=>{
                        $(".cont1").html(item.title)
                        $(".cont2").html(item.cont2)
                        $(".price").html(item.price)
                        $(".pian").html(item.pian)
                        $(".num").html(item.num)

                    }) 
                }
                localStorage.setItem("deta",JSON.stringify(data))
                // console.log( localStorage.getItem("deta"))
            }
        })
         

        let starList = document.querySelectorAll(".star li");
        // console.log(liList)
        // 获取的应该是节点
        let words = document.querySelectorAll(".words")[0];
        // console.log(words)
        let score = 0 ;   //定义的一个变量，代表当前选择的分数

        let wordsArray = ["很糟糕","不太好","还可以","挺好的","特别好"]
        // console.log(wordsArray)
        for(let i = 0;i<starList.length;i++){
            starList[i].onmouseenter = function(){
            // alert(1)
                let index = this.getAttribute("index")
                for(let j = 0;j<=index;j++){
                    starList[j].className="light"
                }
            }
            starList[i].onmouseleave = function(){
            // alert(1)
                for(let j = 0;j<starList.length;j++){
                    starList[j].className=""
                }
                for(let i = 0;i<score;i++){
                    starList[i].className="light"
                }
            }
            starList[i].onclick = function(){
                // 点击到某一颗星星上所对应的分数
                score = Number(this.getAttribute("index"))+1

                words.innerHTML=wordsArray[score - 1];
            }
        }

        let numb = $(".numb").html()
        // let reduce = $("#reduce").html()
        let add = $("#add").html()
        // console.log(add)
        $("#add").click(function(){
            numb++;
            $(".numb").html(numb)
        })
        $("#reduce").click(function(){
            if(numb<=0){
                return;
            }
            else{
                numb--;
                $(".numb").html(numb)
            }
        })
        

        
    </script>
</body>
</html>